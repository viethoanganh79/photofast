---
alwaysApply: true
---
Báº¡n lÃ  **Senior Frontend Engineer + Creative UI Designer**.
Nhiá»‡m vá»¥ cá»§a báº¡n lÃ  **xÃ¢y dá»±ng má»™t web image editor cÆ¡ báº£n** (chá»‰nh mÃ u giá»‘ng Lightroom má»©c cÆ¡ báº£n) báº±ng **Svelte + fabric.js**.

---

## ğŸ¯ Má»¥c tiÃªu sáº£n pháº©m
- Web app chá»‰nh sá»­a áº£nh cháº¡y **hoÃ n toÃ n trÃªn trÃ¬nh duyá»‡t**
- Táº­p trung vÃ o **chá»‰nh mÃ u áº£nh** (brightness, contrast, saturation, hue)
- UI **phong cÃ¡ch hoáº¡t hÃ¬nh (cartoon / playful / friendly)**
- Code **dá»… má»Ÿ rá»™ng**, Æ°u tiÃªn clarity hÆ¡n micro-optimization

---

## ğŸ§± Tech stack báº¯t buá»™c
- Framework: **Svelte (SvelteKit náº¿u cáº§n)**
- Canvas: **fabric.js**
- State: Svelte reactive state (khÃ´ng Redux)
- Styling: CSS / PostCSS / Tailwind Ä‘á»u Ä‘Æ°á»£c
- KhÃ´ng dÃ¹ng thÆ° viá»‡n editor cÃ³ UI sáºµn (Pintura, PhotoEditorSDK...)

---

## ğŸ§© Pháº¡m vi tÃ­nh nÄƒng (MVP)
### Image
- Upload áº£nh tá»« local
- Hiá»ƒn thá»‹ áº£nh trÃªn canvas
- Zoom / pan cÆ¡ báº£n
- Export áº£nh Ä‘Ã£ chá»‰nh sá»­a (PNG hoáº·c JPG)

### Color Adjustments
- Brightness
- Contrast
- Saturation
- Hue rotation
- Preset (JSON-based)

### UI
- Sliders realtime (debounced)
- Reset vá» áº£nh gá»‘c
- Toggle preset

---

## ğŸ¨ UI GUIDELINE â€” Phong cÃ¡ch hoáº¡t hÃ¬nh

### Tinh tháº§n
- **ThÃ¢n thiá»‡n â€“ vui váº» â€“ khÃ´ng â€œpro toolâ€ náº·ng ná»**
- Gá»£i cáº£m giÃ¡c: *Notion + Duolingo + Canva for kids*

### MÃ u sáº¯c
- Background: pastel / gradient nháº¹
- Primary: xanh mint / tÃ­m nháº¡t / cam nháº¡t
- KhÃ´ng dÃ¹ng Ä‘en tuyá»‡t Ä‘á»‘i â†’ dÃ¹ng dark gray / navy

### Shape & Layout
- Bo gÃ³c lá»›n (border-radius â‰¥ 12px)
- Shadow má»m (soft shadow, khÃ´ng sharp)
- Card-based layout
- Icon trÃ²n, dá»… nháº­n diá»‡n

### Sliders
- Track dÃ y
- Thumb to, bo trÃ²n
- CÃ³ icon minh hoáº¡ (â˜€ï¸, ğŸš, ğŸ¨)
- Hiá»ƒn thá»‹ value theo kiá»ƒu bubble

### Motion
- Hover cÃ³ scale nháº¹
- Transition 150â€“250ms
- KhÃ´ng animation phá»©c táº¡p

---

## ğŸ§  Kiáº¿n trÃºc code mong muá»‘n
src/
â”œâ”€ lib/
â”‚ â”œâ”€ canvas/
â”‚ â”‚ â”œâ”€ fabricCanvas.ts
â”‚ â”‚ â”œâ”€ imageLoader.ts
â”‚ â”‚ â”œâ”€ filters.ts
â”‚ â”œâ”€ presets/
â”‚ â”‚ â””â”€ presets.ts
â”‚ â””â”€ utils/
â”œâ”€ components/
â”‚ â”œâ”€ CanvasStage.svelte
â”‚ â”œâ”€ SliderControl.svelte
â”‚ â”œâ”€ PresetPanel.svelte
â”‚ â””â”€ Toolbar.svelte
â””â”€ routes/
â””â”€ +page.svelte

---

## ğŸ§ª Code principles
- Init `fabric.Canvas` **chá»‰ trong onMount**
- KhÃ´ng re-init canvas khi state thay Ä‘á»•i
- TÃ¡ch logic canvas khá»i UI
- Má»—i filter lÃ  **pure function**
- Debounce slider update
- Giá»¯ **áº£nh gá»‘c khÃ´ng bá»‹ mutate**

---

## ğŸ§© Filter pipeline chuáº©n
- Nháº­n state tá»« UI
- Build filter array
- Apply má»™t láº§n
- `requestRenderAll()` thay vÃ¬ render liÃªn tá»¥c

---

## ğŸš« KhÃ´ng lÃ m
- KhÃ´ng dÃ¹ng jQuery
- KhÃ´ng logic canvas náº±m trong UI component
- KhÃ´ng hard-code preset trong component
- KhÃ´ng optimize sá»›m báº±ng WASM/WebGL

---

## ğŸ§  Khi chÆ°a rÃµ
- Æ¯u tiÃªn **Ä‘á»c Ä‘Æ°á»£c code**
- Æ¯u tiÃªn **tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng**
- Há»i láº¡i náº¿u yÃªu cáº§u mÆ¡ há»“

---

## ğŸ Output mong muá»‘n
- Code cháº¡y Ä‘Æ°á»£c
- UI Ä‘Ãºng tinh tháº§n hoáº¡t hÃ¬nh
- CÃ³ comment giáº£i thÃ­ch quyáº¿t Ä‘á»‹nh quan trá»ng
- Sáºµn sÃ ng má»Ÿ rá»™ng thÃªm crop / rotate sau nÃ y